{% extends 'base.html' %}

{% block title %}Modifier Fournisseur{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Modifier Fournisseur</h2>
    <div class="form-container">
        <form method="POST" action="{{ url_for('fournisseurs.edit_fournisseur', id=fournisseur.id) }}" enctype="multipart/form-data">
            <div class="mb-3">
                <label for="nom" class="form-label">Nom</label>
                <input type="text" class="form-control" id="nom" name="nom" value="{{ fournisseur.nom }}" required>
            </div>
            <div class="mb-3">
                <label for="NIF" class="form-label">Numéro</label>
                <input type="text" class="form-control" id="NIF" name="NIF" value="{{ fournisseur.NIF }}" required>
            </div>
            <div class="mb-3">
                <label for="contact" class="form-label">Contact</label>
                <input type="text" class="form-control" id="contact" name="contact" value="{{ fournisseur.contact }}">
            </div>
            <div class="mb-3">
                <label for="address" class="form-label">Adresse</label>
                <input type="text" class="form-control" id="address" name="address" value="{{ fournisseur.address }}">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" name="email" value="{{ fournisseur.email }}">
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="trader" name="trader" {% if fournisseur.trader %}checked{% endif %}>
                <label class="form-check-label" for="trader">Trader</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="list_noire" name="list_noire" {% if fournisseur.list_noire %}checked{% endif %}>
                <label class="form-check-label" for="list_noire">Liste Noire</label>
            </div>
            <div class="mb-3">
                <div class="card-img-actions" style="width: 200px; height:100px; object-fit: cover;">
                    <img class="card-img-top img-fluid" 
                        src="{{ url_for('static', filename=fournisseur.sigle_image if fournisseur.sigle_image else 'uploads/default.jpg') }}" 
                        alt="Fournisseur Image" style="width: 100%; height:150px; object-fit: cover;">
                </div>
            </div>
            <div class="mb-3">
                <label for="sigle_image" class="form-label">Logo</label>
                <input type="file" class="form-control" id="sigle_image" name="sigle_image">
            </div>
            <div class="mb-3">
                <label for="etiquettes" class="form-label">Etiquettes</label><br>
                {% for etiquette in valid_etiquettes %}
                <input type="checkbox" name="etiquettes" value="{{ etiquette }}"
                       {% if etiquette in (fournisseur.etiquettes or []) %}checked{% endif %}>
                {{ etiquette }}<br>
                {% endfor %}
            </div>
            <button type="submit" class="btn btn-primary">Modifier</button>
            <a href="{{ url_for('fournisseurs.list_fournisseurs') }}" class="btn btn-secondary">Retour à la liste</a>
        </form>
    </div>
</div>
{% endblock %}